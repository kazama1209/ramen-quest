<div class="row">
  <div class="col-md-12">
    <table class="table table-bordered">
      <tr>
        <th>タイトル</th>
        <td><%= f.input :title, label: false, input_html: { required: true } %></td>
      </tr>
      <tr>
        <th>味の種類</th>
        <td><%= f.input :taste, collection: Review.tastes.keys, label: false, input_html: { required: true } %></td>
      </tr>
      <tr>
        <th>評価</th>
        <td>
          <div id="star">
            <%= f.input :rate, as: :hidden, label: false, id: :review_star, input_html: { required: true } %>  
          </div>
        </td>
      </tr>
      <tr>
        <th>本文</th>
        <td><%= f.input :body, label: false, input_html: { rows: 10, required: true } %></td>
      </tr>
      <tr>
        <th>写真</th>
        <td>
          <div id="org_img_preview_1" class="float-left bg-image mr-3 mb-3" style="background-image: url(<%= image_url("no-image.svg") %>); width: 120px; height: 120px;">
          </div>
          <div>
            <img id="img_preview_1" src="#" class='d-none mb-3' style="max-width: 100%; height: 120px;" />  
          </div>
          <div id="org_img_preview_2" class="float-left bg-image mr-3 mb-3" style="background-image: url(<%= image_url("no-image.svg") %>); width: 120px; height: 120px;">
          </div>
          <div>
            <img id="img_preview_2" src="#" class='d-none mb-3' style="max-width: 100%; height: 120px;" />
          </div>
          <div id="org_img_preview_3" class="float-left bg-image mb-3" style="background-image: url(<%= image_url("no-image.svg") %>); width: 120px; height: 120px;">
          </div>
          <div>
            <img id="img_preview_3" src="#" class='d-none mb-3' style="max-width: 100%; height: 120px;" />
          </div>
          <%= f.input :image1, as: :file, label: false, multiple: true, input_html: { required: true } %>
          <%= f.input :image2, as: :file, label: false, multiple: true %>
          <%= f.input :image3, as: :file, label: false, multiple: true %>
        </td>
      </tr>
    </table>
    <div class="text-center">
      <%= f.submit class: "btn btn-danger btn-sm px-5" %>
    </div>
  </div>
</div>
<script>
  $(document).ready(function(){
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
  
        reader.onload = function (e) {
          $('#org_img_preview_1').attr('src', e.target.result).addClass('d-none');
          $('#img_preview_1').attr('src', e.target.result).removeClass('d-none');
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $('#review_image1').change(function(){
      readURL(this);
    });
  });
  
  $(document).ready(function(){
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
  
        reader.onload = function (e) {
          $('#org_img_preview_2').attr('src', e.target.result).addClass('d-none');
          $('#img_preview_2').attr('src', e.target.result).removeClass('d-none');
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $('#review_image2').change(function(){
      readURL(this);
    });
  });
  
  $(document).ready(function(){
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
  
        reader.onload = function (e) {
          $('#org_img_preview_3').attr('src', e.target.result).addClass('d-none');
          $('#img_preview_3').attr('src', e.target.result).removeClass('d-none');
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $('#review_image3').change(function(){
      readURL(this);
    });
  });
  
  $('#star').raty({
    size     : 36,
    starOff:  '<%= asset_path('star-off.png') %>',
    starOn : '<%= asset_path('star-on.png') %>',
    starHalf: '<%= asset_path('star-half.png') %>',
    scoreName: 'review[rate]',
    half: true,
  });
</script>